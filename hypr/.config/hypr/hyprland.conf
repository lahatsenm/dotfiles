################
### MONITORS ###
################

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,1920x1080,auto,1


###################
### MY PROGRAMS ###
###################
# See https://wiki.hyprland.org/Configuring/Keywords/
$terminal = wezterm start
$fileManager = dolphin

# hyprpm PERMISSION
permission = /usr/(bin|local/bin)/hyprpm, plugin, allow

#################
### AUTOSTART ###
#################

# Autostart necessary processes (like notifications daemons, status bars, etc.)
# or programs like emacs, dolphin,...
exec-once = hyprpm reload -n
exec-once = nm-applet --indicator &
exec-once = ~/.config/hypr/xdg-portal-hyprland
exec-once = swww-daemon
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = ~/.config/hypr/scripts/wall.sh
exec-once = systemctl start NetworkManager
exec-once = hypridle & dunst &
exec-once = flameshot &
exec-once = waybar &
exec-once = [workspace 1 silent] $terminal
exec-once = [workspace 2 silent] emacs
exec-once = [workspace 3 silent] zen-browser
exec-once = [workspace 4 silent] dolphin

#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hyprland.org/Configuring/Environment-variables/
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XDG_MENU_PREFIX,plasma-
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,qt5ct

#####################
### LOOK AND FEEL ###
#####################

# Refer to https://wiki.hyprland.org/Configuring/Variables/

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 0
    gaps_out = 0

    border_size = 1   # I don't know but sometimes I want this and sometimes I don't

    # https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
    col.active_border = rgba(2aa198ff) rgba(268bd2ff) 45deg
	col.inactive_border = rgba(073642ff)

    # Set to true to enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = true

    # https://wiki.hyprland.org/Configuring/Tearing/
    allow_tearing = false

    layout = hy3
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 0

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = true
        range = 15         
        render_power = 3  
        color = rgba(0,0,0,0.35)   # soft black with 35% opacity
    }
    
    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true
        size = 3
        passes = 3
        vibrancy = 0.1696
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true

    # https://wiki.hyprland.org/Configuring/Animations/
    bezier = overshot, 0.05, 0.9, 0.1, 1.05
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1

    animation = windows, 1, 2, overshot, slide
    animation = windowsOut, 1, 2, smoothOut, slide
    animation = windowsMove, 1, 2, default
    animation = border, 1, 10, default
    animation = fade, 1, 2, smoothIn
    animation = fadeDim, 1, 0.3, smoothIn
    animation = workspaces, 0, 0.3, default
}

# https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = true
    preserve_split = true
}
  
# https://wiki.hyprland.org/Configuring/Master-Layout/
master {
    new_status = master
    orientation = right
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    mouse_move_enables_dpms = true
}

#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = fr
    kb_variant =,azerty
    kb_model =
    kb_options = #ctrl:swapcaps
    kb_rules =

    follow_mouse = 1

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = false
	    middle_button_emulation = true
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
    workspace_swipe_forever = true
}

# Example per-device config
# https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

binds {
    movefocus_cycles_fullscreen = 1       
}

###################
###   PLUGINS   ###
###################

plugin {
    hy3 {
        tabs {
            border_width = 1
            col.active = rgba(073642ff)          
            col.active.border = rgba(2aa198ff)   
            col.active.text = rgba(eee8d5ff)     
            col.inactive = rgba(002b36ff)        
            col.inactive.border = rgba(073642ff) 
            col.inactive.text = rgba(657b83ff)   
            col.urgent = rgba(dc322fff)          
            col.urgent.border = rgba(b58900ff)   
            col.urgent.text = rgba(fdf6e3ff)     
            text_font = SF Pro Display Bold
            text_height = 12
            padding = 0
            radius = 0
        }
        autotile {
            enable = true
            trigger_width = 800
            trigger_height = 500
        }
    }
    hyprexpo {
        columns = 3
        gap_size = 5
        bg_col = rgb(111111)
        workspace_method = center current
        gesture_distance = 300
    }
    dynamic-cursors {
        mode = tilt
    }
}

###################
### KEYBINDINGS ###
###################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = ALT # Sets "ALT" key as main modifier

# https://wiki.hyprland.org/Configuring/Binds/
bind = $mainMod, return, exec, $terminal
bind = $mainMod, q, killactive,
bind = $mainMod, t, togglefloating,
bind = $mainMod, z, hy3:changegroup, toggletab
bind = $mainMod CTRL, z, hy3:makegroup, tab
bind = $mainMod, right, hy3:makegroup, h
bind = $mainMod, down, hy3:makegroup, v
bind = SUPER, E, hyprexpo:expo, toggle
# Program launcher 
bind = $mainMod, SPACE, exec, fuzzel

bind = $mainMod, TAB, fullscreen,
bind = $mainMod SHIFT, r, exec, hyprctl reload
bind = $mainMod, F9, exec, ~/.config/hypr/scripts/wall.sh
bind = $mainMod, F7, exec, nm-connection-editor
bind = $mainMod SHIFT, F7, exec, wezterm start -- nmtui 
bind = $mainMod SHIFT, F11, exec, systemctl restart NetworkManager
bind = $mainMod, F12, exec, hyprlock
bind = $mainMod SHIFT, q, exec, wlogout --protocol layer-shell
bind = $mainMod SHIFT, b, exec, pkill waybar; waybar
bind = $mainMod SHIFT, w, exec, waypaper
    
# Screenshot
bind = , PRINT, exec, flameshot gui
bind = $mainMod, PRINT, exec, hyprshot -m window
bind = SHIFT, PRINT, exec, hyprshot -m region

# Color picker
bind = SUPER, p, exec, ~/.config/hypr/scripts/pickcolor.sh

# Move focus on window
bind = $mainMod, h, hy3:movefocus, l
bind = $mainMod, l, hy3:movefocus, r
bind = CTRL, k, hy3:movefocus, u
bind = CTRL, j, hy3:movefocus, d

# Move window
bind = $mainMod SHIFT, h, hy3:movewindow, l
bind = $mainMod SHIFT, l, hy3:movewindow, r
bind = $mainMod SHIFT, k, hy3:movewindow, u
bind = $mainMod SHIFT, j, hy3:movewindow, d

# Switch to workspace
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
# AZERTY keyboard layout support
bind = $mainMod, ampersand, workspace, 1
bind = $mainMod, eacute, workspace, 2
bind = $mainMod, quotedbl, workspace, 3
bind = $mainMod, apostrophe, workspace, 4
bind = $mainMod, parenleft, workspace, 5
bind = $mainMod, minus, workspace, 6
bind = $mainMod, egrave, workspace, 7
bind = $mainMod, underscore, workspace, 8
bind = $mainMod, ccedilla, workspace, 9
bind = $mainMod, agrave, workspace, 10

# Move active window to a workspace
bind = $mainMod SHIFT, 1, hy3:movetoworkspace, 1, follow
bind = $mainMod SHIFT, 2, hy3:movetoworkspace, 2, follow
bind = $mainMod SHIFT, 3, hy3:movetoworkspace, 3, follow
bind = $mainMod SHIFT, 4, hy3:movetoworkspace, 4, follow
bind = $mainMod SHIFT, 5, hy3:movetoworkspace, 5, follow
bind = $mainMod SHIFT, 6, hy3:movetoworkspace, 6, follow
bind = $mainMod SHIFT, 7, hy3:movetoworkspace, 7, follow
bind = $mainMod SHIFT, 8, hy3:movetoworkspace, 8, follow
bind = $mainMod SHIFT, 9, hy3:movetoworkspace, 9, follow
bind = $mainMod SHIFT, 0, hy3:movetoworkspace, 10, follow
# AZERTY keyboard layout support
bind = $mainMod SHIFT, ampersand, hy3:movetoworkspace, 1, follow
bind = $mainMod SHIFT, eacute, hy3:movetoworkspace, 2, follow
bind = $mainMod SHIFT, quotedbl, hy3:movetoworkspace, 3, follow
bind = $mainMod SHIFT, apostrophe, hy3:movetoworkspace, 4, follow
bind = $mainMod SHIFT, parenleft, hy3:movetoworkspace, 5, follow
bind = $mainMod SHIFT, minus, hy3:movetoworkspace, 6, follow
bind = $mainMod SHIFT, egrave, hy3:movetoworkspace, 7, follow
bind = $mainMod SHIFT, underscore, hy3:movetoworkspace, 8, follow
bind = $mainMod SHIFT, ccedilla, hy3:movetoworkspace, 9, follow
bind = $mainMod SHIFT, agrave, hy3:movetoworkspace, 10, follow

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1
# Switch focus on another tab using the mouse scroll button
# when hovering on the tab bar in hy3
bindn = , mouse_down, hy3:focustab, l, require_hovered
bindn = , mouse_up, hy3:focustab, r, require_hovered

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Notifications
bind = SUPER, D, exec, ~/.config/dunst/scripts/datetime_notify.sh show
bind = SUPER, T, exec, ~/.config/dunst/scripts/window_title_notify.sh show
bind = SUPER, W, exec, ~/.config/dunst/scripts/workspace_notify.sh show
bind = SUPER, M, exec, ~/.config/dunst/scripts/system_usage.sh show
#----------------------------------------------------------------------
# TODO: NEED TO CHECK THIS SCRIPT
bind = SUPER, I, exec, ~/.config/dunst/scripts/hypridle_notify.sh start
bind = SUPER, I, exec, ~/.config/dunst/scripts/hypridle_notify.sh stop
#----------------------------------------------------------------------
bind = SUPER, N, exec, ~/.config/dunst/scripts/network_notify.sh show
bind = SUPER, C, exec, ~/.config/dunst/scripts/kill_rt.sh

# submap "resize"
bind=$mainMod,R,submap,resize

# START "resize"
submap=resize

binde=,l,resizeactive,20 0
binde=,h,resizeactive,-20 0
binde=,k,resizeactive,0 -20
binde=,j,resizeactive,0 20

binde=,right,resizeactive,20 0
binde=,left,resizeactive,-20 0
binde=,up,resizeactive,0 -20
binde=,down,resizeactive,0 20

# Reset binds
bind=,escape,submap,reset 
bind=$mainMod,R,submap,reset 

submap=reset
# END "resize"

# submap "MAX" (maximize window)
bind=$mainMod,m,exec,hyprctl dispatch submap MAX && hyprctl dispatch fullscreenstate 1 1

# START "MAX"
submap=MAX

# Allow workspace switching in "MAX"
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod, ampersand, workspace, 1
bind = $mainMod, eacute, workspace, 2
bind = $mainMod, quotedbl, workspace, 3
bind = $mainMod, apostrophe, workspace, 4
bind = $mainMod, parenleft, workspace, 5
bind = $mainMod, minus, workspace, 6
bind = $mainMod, egrave, workspace, 7
bind = $mainMod, underscore, workspace, 8
bind = $mainMod, ccedilla, workspace, 9
bind = $mainMod, agrave, workspace, 10

# reset binds
bind=,escape,exec,hyprctl dispatch submap reset && hyprctl dispatch fullscreenstate 0 0
bind=$mainMod,m,exec,hyprctl dispatch submap reset && hyprctl dispatch fullscreenstate 0 0

submap=reset
# END "MAX"

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, ~/.config/dunst/scripts/volume_notify.sh up 
bindel = ,XF86AudioLowerVolume, exec, ~/.config/dunst/scripts/volume_notify.sh down 
bindel = ,XF86AudioMute, exec, ~/.config/dunst/scripts/volume_notify.sh mute
bindel = SUPER, V, exec, ~/.config/dunst/scripts/volume_notify.sh show
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-
# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
windowrulev2 = workspace 2 silent,class:(Emacs)
windowrulev2 = workspace 3 silent,class:(zen)
windowrulev2 = workspace 4 silent,class:(org.kde.dolphin)
windowrulev2 = workspace 10 silent,class:^(libreoffice-.*)$
windowrulev2 = workspace 10 silent,class:(soffice)

windowrulev2 = float,class:(org.pulseaudio.pavucontrol)
windowrulev2 = size 842 512,class:(org.pulseaudio.pavucontrol)

windowrulev2 = float,class:(org.gnome.Calendar)
windowrulev2 = size 1109 799,class:(org.gnome.Calendar)

windowrulev2 = float,class:(io.missioncenter.MissionCenter)
windowrulev2 = size 1160 761,class:(io.missioncenter.MissionCenter)

windowrulev2 = float,class:(waypaper)
windowrulev2 = size 882 965,class:(waypaper)

windowrulev2 = float,class:(org.kde.gwenview)
windowrulev2 = size 925 1001,class:(org.kde.gwenview)

windowrulev2 = float,class:(zenity)
windowrulev2 = size 975 856,class:(zenity)

windowrulev2 = float,class:(io.github.Qalculate.qalculate-qt)
windowrulev2 = size 1104 787,class:(io.github.Qalculate.qalculate-qt)

windowrulev2 = animation slide bottom,floating:1

# Ignore maximize requests from apps
windowrulev2 = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Layer rule(s)
layerrule = blur,rofi
layerrule = dimaround,rofi
layerrule = blur,launcher
layerrule = animation popin,launcher
layerrule = blur,waybar
layerrule = ignorezero,waybar
layerrule = blur, notifications
layerrule = ignorealpha 0.5, notifications
layerrule = animation slide left,rofi
layerrule = blur,logout_dialog
layerrule = dimaround,logout_dialog
